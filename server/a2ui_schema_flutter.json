{
  "title": "A2UI Message Schema",
  "description": "Describes a JSON payload for an A2UI (Agent to UI) message, which is used to dynamically construct and update user interfaces. A message MUST contain exactly ONE of the action properties: 'beginRendering', 'surfaceUpdate', 'dataModelUpdate', or 'deleteSurface'.",
  "type": "object",
  "properties": {
    "beginRendering": {
      "type": "object",
      "description": "Signals the client to begin rendering a surface with a root component and specific styles.",
      "properties": {
        "surfaceId": {
          "type": "STRING",
          "description": "The surface ID of the surface to render."
        },
        "root": {
          "type": "STRING",
          "description": "The root widget ID for the surface. All components must be descendents of this root in order to be displayed."
        },
        "styles": {
          "type": "OBJECT",
          "properties": {
            "font": {
              "type": "STRING",
              "description": "The base font for this surface"
            },
            "primaryColor": {
              "type": "STRING",
              "description": "The seed color for the theme of this surface."
            }
          }
        }
      },
      "required": [
        "root",
        "surfaceId"
      ]
    },
    "surfaceUpdate": {
      "type": "OBJECT",
      "description": "Updates a surface with a new set of components.",
      "properties": {
        "surfaceId": {
          "type": "STRING",
          "description": "The unique identifier for the UI surface to create or update. If you are adding a new surface this *must* be a new, unique identified that has never been used for any existing surfaces shown."
        },
        "components": {
          "type": "ARRAY",
          "description": "A list of component definitions.",
          "items": {
            "type": "OBJECT",
            "description": "Represents a *single* component in a UI widget tree. This component could be one of many supported types.",
            "properties": {
              "id": {
                "type": "STRING"
              },
              "weight": {
                "type": "INTEGER",
                "description": "Optional layout weight for use in Row/Column children."
              },
              "component": {
                "type": "OBJECT",
                "description": "A wrapper object that MUST contain exactly one key, which is the name of the component type (e.g., 'Text'). The value is an object containing the properties for that specific component.",
                "properties": {
                  "AudioPlayer": {
                    "type": "OBJECT",
                    "properties": {
                      "url": {
                        "type": "OBJECT",
                        "description": "The URL of the audio to play.",
                        "properties": {
                          "path": {
                            "type": "STRING",
                            "description": "A relative or absolute path in the data model."
                          },
                          "literalString": {
                            "type": "STRING"
                          }
                        }
                      }
                    },
                    "required": [
                      "url"
                    ]
                  },
                  "Button": {
                    "type": "OBJECT",
                    "properties": {
                      "child": {
                        "type": "STRING",
                        "description": "The ID of a child widget. This should always be set, e.g. to the ID of a `Text` widget."
                      },
                      "action": {
                        "type": "OBJECT",
                        "properties": {
                          "name": {
                            "type": "STRING"
                          },
                          "context": {
                            "type": "ARRAY",
                            "description": "A list of name-value pairs to be sent with the action to include data associated with the action, e.g. values that are submitted.",
                            "items": {
                              "type": "OBJECT",
                              "properties": {
                                "key": {
                                  "type": "STRING"
                                },
                                "value": {
                                  "type": "OBJECT",
                                  "properties": {
                                    "path": {
                                      "type": "STRING",
                                      "description": "A path in the data model which should be bound to an input element, e.g. a string reference for a text field, or number reference for a slider."
                                    },
                                    "literalString": {
                                      "type": "STRING",
                                      "description": "A literal string relevant to the action"
                                    },
                                    "literalNumber": {
                                      "type": "NUMBER",
                                      "description": "A literal number relevant to the action"
                                    },
                                    "literalBoolean": {
                                      "type": "BOOLEAN",
                                      "description": "A literal boolean relevant to the action"
                                    }
                                  }
                                }
                              },
                              "required": [
                                "key",
                                "value"
                              ]
                            }
                          }
                        },
                        "required": [
                          "name"
                        ]
                      },
                      "primary": {
                        "type": "BOOLEAN",
                        "description": "Whether the button invokes a primary action."
                      }
                    },
                    "required": [
                      "child",
                      "action"
                    ]
                  },
                  "Card": {
                    "type": "OBJECT",
                    "properties": {
                      "child": {
                        "type": "STRING"
                      }
                    },
                    "required": [
                      "child"
                    ]
                  },
                  "CheckBox": {
                    "type": "OBJECT",
                    "properties": {
                      "label": {
                        "type": "OBJECT",
                        "properties": {
                          "path": {
                            "type": "STRING",
                            "description": "A relative or absolute path in the data model."
                          },
                          "literalString": {
                            "type": "STRING"
                          }
                        }
                      },
                      "value": {
                        "type": "OBJECT",
                        "properties": {
                          "path": {
                            "type": "STRING",
                            "description": "A relative or absolute path in the data model."
                          },
                          "literalBoolean": {
                            "type": "BOOLEAN"
                          }
                        }
                      }
                    },
                    "required": [
                      "label",
                      "value"
                    ]
                  },
                  "Column": {
                    "type": "OBJECT",
                    "properties": {
                      "distribution": {
                        "type": "STRING",
                        "description": "How children are aligned on the main axis. ",
                        "enum": [
                          "start",
                          "center",
                          "end",
                          "spaceBetween",
                          "spaceAround",
                          "spaceEvenly"
                        ]
                      },
                      "alignment": {
                        "type": "STRING",
                        "description": "How children are aligned on the cross axis. ",
                        "enum": [
                          "start",
                          "center",
                          "end",
                          "stretch",
                          "baseline"
                        ]
                      },
                      "children": {
                        "type": "OBJECT",
                        "description": "Either an explicit list of widget IDs for the children, or a template with a data binding to the list of children.",
                        "properties": {
                          "explicitList": {
                            "type": "ARRAY",
                            "items": {
                              "type": "STRING"
                            }
                          },
                          "template": {
                            "type": "OBJECT",
                            "properties": {
                              "componentId": {
                                "type": "STRING"
                              },
                              "dataBinding": {
                                "type": "STRING"
                              }
                            },
                            "required": [
                              "componentId",
                              "dataBinding"
                            ]
                          }
                        }
                      }
                    }
                  },
                  "DateTimeInput": {
                    "type": "OBJECT",
                    "properties": {
                      "value": {
                        "type": "OBJECT",
                        "description": "The selected date and/or time.",
                        "properties": {
                          "path": {
                            "type": "STRING",
                            "description": "A relative or absolute path in the data model."
                          },
                          "literalString": {
                            "type": "STRING"
                          }
                        }
                      },
                      "enableDate": {
                        "type": "BOOLEAN"
                      },
                      "enableTime": {
                        "type": "BOOLEAN"
                      },
                      "firstDate": {
                        "type": "STRING",
                        "description": "The earliest selectable date (YYYY-MM-DD). Defaults to -9999-01-01."
                      },
                      "lastDate": {
                        "type": "STRING",
                        "description": "The latest selectable date (YYYY-MM-DD). Defaults to 9999-12-31."
                      }
                    },
                    "required": [
                      "value"
                    ]
                  },
                  "Divider": {
                    "type": "OBJECT",
                    "properties": {
                      "axis": {
                        "type": "STRING",
                        "enum": [
                          "horizontal",
                          "vertical"
                        ]
                      }
                    }
                  },
                  "Icon": {
                    "type": "OBJECT",
                    "properties": {
                      "name": {
                        "type": "OBJECT",
                        "description": "The name of the icon to display. This can be a literal string ('literalString') or a reference to a value in the data model ('path', e.g. '/icon/name').",
                        "properties": {
                          "path": {
                            "type": "STRING",
                            "description": "A relative or absolute path in the data model.",
                            "enum": [
                              "accountCircle",
                              "add",
                              "arrowBack",
                              "arrowForward",
                              "attachFile",
                              "calendarToday",
                              "call",
                              "camera",
                              "check",
                              "close",
                              "delete",
                              "download",
                              "edit",
                              "error",
                              "event",
                              "favorite",
                              "favoriteOff",
                              "folder",
                              "help",
                              "home",
                              "info",
                              "locationOn",
                              "lock",
                              "lockOpen",
                              "mail",
                              "menu",
                              "moreHoriz",
                              "moreVert",
                              "notifications",
                              "notificationsOff",
                              "payment",
                              "person",
                              "phone",
                              "photo",
                              "print",
                              "refresh",
                              "search",
                              "send",
                              "settings",
                              "share",
                              "shoppingCart",
                              "star",
                              "starHalf",
                              "starOff",
                              "upload",
                              "visibility",
                              "visibilityOff",
                              "warning"
                            ]
                          },
                          "literalString": {
                            "type": "STRING",
                            "enum": [
                              "accountCircle",
                              "add",
                              "arrowBack",
                              "arrowForward",
                              "attachFile",
                              "calendarToday",
                              "call",
                              "camera",
                              "check",
                              "close",
                              "delete",
                              "download",
                              "edit",
                              "error",
                              "event",
                              "favorite",
                              "favoriteOff",
                              "folder",
                              "help",
                              "home",
                              "info",
                              "locationOn",
                              "lock",
                              "lockOpen",
                              "mail",
                              "menu",
                              "moreHoriz",
                              "moreVert",
                              "notifications",
                              "notificationsOff",
                              "payment",
                              "person",
                              "phone",
                              "photo",
                              "print",
                              "refresh",
                              "search",
                              "send",
                              "settings",
                              "share",
                              "shoppingCart",
                              "star",
                              "starHalf",
                              "starOff",
                              "upload",
                              "visibility",
                              "visibilityOff",
                              "warning"
                            ]
                          }
                        }
                      }
                    },
                    "required": [
                      "name"
                    ]
                  },
                  "Image": {
                    "type": "OBJECT",
                    "properties": {
                      "url": {
                        "type": "OBJECT",
                        "description": "Asset path (e.g. assets/...) or network URL (e.g. https://...)",
                        "properties": {
                          "path": {
                            "type": "STRING",
                            "description": "A relative or absolute path in the data model."
                          },
                          "literalString": {
                            "type": "STRING"
                          }
                        }
                      },
                      "fit": {
                        "type": "STRING",
                        "description": "How the image should be inscribed into the box.",
                        "enum": [
                          "fill",
                          "contain",
                          "cover",
                          "fitWidth",
                          "fitHeight",
                          "none",
                          "scaleDown"
                        ]
                      },
                      "usageHint": {
                        "type": "STRING",
                        "description": "A hint for the image size and style. One of:\n      - icon: Small square icon.\n      - avatar: Circular avatar image.\n      - smallFeature: Small feature image.\n      - mediumFeature: Medium feature image.\n      - largeFeature: Large feature image.\n      - header: Full-width, full bleed, header image.",
                        "enum": [
                          "icon",
                          "avatar",
                          "smallFeature",
                          "mediumFeature",
                          "largeFeature",
                          "header"
                        ]
                      }
                    }
                  },
                  "List": {
                    "type": "OBJECT",
                    "properties": {
                      "children": {
                        "type": "OBJECT",
                        "properties": {
                          "explicitList": {
                            "type": "ARRAY",
                            "items": {
                              "type": "STRING"
                            }
                          },
                          "template": {
                            "type": "OBJECT",
                            "properties": {
                              "componentId": {
                                "type": "STRING"
                              },
                              "dataBinding": {
                                "type": "STRING"
                              }
                            },
                            "required": [
                              "componentId",
                              "dataBinding"
                            ]
                          }
                        }
                      },
                      "direction": {
                        "type": "STRING",
                        "enum": [
                          "vertical",
                          "horizontal"
                        ]
                      },
                      "alignment": {
                        "type": "STRING",
                        "enum": [
                          "start",
                          "center",
                          "end",
                          "stretch"
                        ]
                      }
                    },
                    "required": [
                      "children"
                    ]
                  },
                  "Modal": {
                    "type": "OBJECT",
                    "properties": {
                      "entryPointChild": {
                        "type": "STRING",
                        "description": "The widget that opens the modal."
                      },
                      "contentChild": {
                        "type": "STRING",
                        "description": "The widget to display in the modal."
                      }
                    },
                    "required": [
                      "entryPointChild",
                      "contentChild"
                    ]
                  },
                  "MultipleChoice": {
                    "type": "OBJECT",
                    "properties": {
                      "selections": {
                        "type": "OBJECT",
                        "properties": {
                          "path": {
                            "type": "STRING",
                            "description": "A relative or absolute path in the data model."
                          },
                          "literalArray": {
                            "type": "ARRAY",
                            "items": {
                              "type": "STRING"
                            }
                          }
                        }
                      },
                      "options": {
                        "type": "ARRAY",
                        "items": {
                          "type": "OBJECT",
                          "properties": {
                            "label": {
                              "type": "OBJECT",
                              "properties": {
                                "path": {
                                  "type": "STRING",
                                  "description": "A relative or absolute path in the data model."
                                },
                                "literalString": {
                                  "type": "STRING"
                                }
                              }
                            },
                            "value": {
                              "type": "STRING"
                            }
                          },
                          "required": [
                            "label",
                            "value"
                          ]
                        }
                      },
                      "maxAllowedSelections": {
                        "type": "INTEGER"
                      }
                    },
                    "required": [
                      "selections",
                      "options"
                    ]
                  },
                  "Row": {
                    "type": "OBJECT",
                    "properties": {
                      "children": {
                        "type": "OBJECT",
                        "description": "Either an explicit list of widget IDs for the children, or a template with a data binding to the list of children.",
                        "properties": {
                          "explicitList": {
                            "type": "ARRAY",
                            "items": {
                              "type": "STRING"
                            }
                          },
                          "template": {
                            "type": "OBJECT",
                            "properties": {
                              "componentId": {
                                "type": "STRING"
                              },
                              "dataBinding": {
                                "type": "STRING"
                              }
                            },
                            "required": [
                              "componentId",
                              "dataBinding"
                            ]
                          }
                        }
                      },
                      "distribution": {
                        "type": "STRING",
                        "enum": [
                          "start",
                          "center",
                          "end",
                          "spaceBetween",
                          "spaceAround",
                          "spaceEvenly"
                        ]
                      },
                      "alignment": {
                        "type": "STRING",
                        "enum": [
                          "start",
                          "center",
                          "end",
                          "stretch",
                          "baseline"
                        ]
                      }
                    },
                    "required": [
                      "children"
                    ]
                  },
                  "Slider": {
                    "type": "OBJECT",
                    "properties": {
                      "value": {
                        "type": "OBJECT",
                        "properties": {
                          "path": {
                            "type": "STRING",
                            "description": "A relative or absolute path in the data model."
                          },
                          "literalNumber": {
                            "type": "NUMBER"
                          }
                        }
                      },
                      "minValue": {
                        "type": "NUMBER"
                      },
                      "maxValue": {
                        "type": "NUMBER"
                      }
                    },
                    "required": [
                      "value"
                    ]
                  },
                  "Tabs": {
                    "type": "OBJECT",
                    "properties": {
                      "tabItems": {
                        "type": "ARRAY",
                        "items": {
                          "type": "OBJECT",
                          "properties": {
                            "title": {
                              "type": "OBJECT",
                              "properties": {
                                "path": {
                                  "type": "STRING",
                                  "description": "A relative or absolute path in the data model."
                                },
                                "literalString": {
                                  "type": "STRING"
                                }
                              }
                            },
                            "child": {
                              "type": "STRING"
                            }
                          },
                          "required": [
                            "title",
                            "child"
                          ]
                        }
                      }
                    },
                    "required": [
                      "tabItems"
                    ]
                  },
                  "Text": {
                    "type": "OBJECT",
                    "properties": {
                      "text": {
                        "type": "OBJECT",
                        "description": "While simple Markdown is supported (without HTML or image references), utilizing dedicated UI components is generally preferred for a richer and more structured presentation.",
                        "properties": {
                          "path": {
                            "type": "STRING",
                            "description": "A relative or absolute path in the data model."
                          },
                          "literalString": {
                            "type": "STRING"
                          }
                        }
                      },
                      "usageHint": {
                        "type": "STRING",
                        "description": "A usage hint for the base text style.",
                        "enum": [
                          "h1",
                          "h2",
                          "h3",
                          "h4",
                          "h5",
                          "caption",
                          "body"
                        ]
                      }
                    },
                    "required": [
                      "text"
                    ]
                  },
                  "TextField": {
                    "type": "OBJECT",
                    "description": "A text input field.",
                    "properties": {
                      "text": {
                        "type": "OBJECT",
                        "description": "The initial value of the text field.",
                        "properties": {
                          "path": {
                            "type": "STRING",
                            "description": "A relative or absolute path in the data model."
                          },
                          "literalString": {
                            "type": "STRING"
                          }
                        }
                      },
                      "label": {
                        "type": "OBJECT",
                        "properties": {
                          "path": {
                            "type": "STRING",
                            "description": "A relative or absolute path in the data model."
                          },
                          "literalString": {
                            "type": "STRING"
                          }
                        }
                      },
                      "textFieldType": {
                        "type": "STRING",
                        "enum": [
                          "shortText",
                          "longText",
                          "number",
                          "date",
                          "obscured"
                        ]
                      },
                      "validationRegexp": {
                        "type": "STRING"
                      },
                      "onSubmittedAction": {
                        "type": "OBJECT",
                        "properties": {
                          "name": {
                            "type": "STRING"
                          },
                          "context": {
                            "type": "ARRAY",
                            "description": "A list of name-value pairs to be sent with the action to include data associated with the action, e.g. values that are submitted.",
                            "items": {
                              "type": "OBJECT",
                              "properties": {
                                "key": {
                                  "type": "STRING"
                                },
                                "value": {
                                  "type": "OBJECT",
                                  "properties": {
                                    "path": {
                                      "type": "STRING",
                                      "description": "A path in the data model which should be bound to an input element, e.g. a string reference for a text field, or number reference for a slider."
                                    },
                                    "literalString": {
                                      "type": "STRING",
                                      "description": "A literal string relevant to the action"
                                    },
                                    "literalNumber": {
                                      "type": "NUMBER",
                                      "description": "A literal number relevant to the action"
                                    },
                                    "literalBoolean": {
                                      "type": "BOOLEAN",
                                      "description": "A literal boolean relevant to the action"
                                    }
                                  }
                                }
                              },
                              "required": [
                                "key",
                                "value"
                              ]
                            }
                          }
                        },
                        "required": [
                          "name"
                        ]
                      }
                    }
                  },
                  "Video": {
                    "type": "OBJECT",
                    "properties": {
                      "url": {
                        "type": "OBJECT",
                        "description": "The URL of the video to play.",
                        "properties": {
                          "path": {
                            "type": "STRING",
                            "description": "A relative or absolute path in the data model."
                          },
                          "literalString": {
                            "type": "STRING"
                          }
                        }
                      }
                    },
                    "required": [
                      "url"
                    ]
                  }
                }
              }
            },
            "required": [
              "id",
              "component"
            ]
          }
        }
      },
      "required": [
        "surfaceId",
        "components"
      ]
    },
    "dataModelUpdate": {
      "type": "object",
      "description": "Updates the data model for a surface.",
      "properties": {
        "surfaceId": {
          "type": "string",
          "description": "The unique identifier for the UI surface this data model update applies to."
        },
        "path": {
          "type": "string",
          "description": "An optional path to a location within the data model (e.g., '/user/name'). If omitted, or set to '/', the entire data model will be replaced."
        },
        "contents": {
          "type": "array",
          "description": "An array of data entries. Each entry must contain a 'key' and exactly one corresponding typed 'value*' property.",
          "items": {
            "type": "object",
            "description": "A single data entry. Exactly one 'value*' property should be provided alongside the key.",
            "properties": {
              "key": {
                "type": "string",
                "description": "The key for this data entry."
              },
              "valueString": {
                "type": "string"
              },
              "valueNumber": {
                "type": "number"
              },
              "valueBoolean": {
                "type": "boolean"
              },
              "valueMap": {
                "description": "Represents a map as an adjacency list.",
                "type": "array",
                "items": {
                  "type": "object",
                  "description": "One entry in the map. Exactly one 'value*' property should be provided alongside the key.",
                  "properties": {
                    "key": {
                      "type": "string"
                    },
                    "valueString": {
                      "type": "string"
                    },
                    "valueNumber": {
                      "type": "number"
                    },
                    "valueBoolean": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "key"
                  ]
                }
              }
            },
            "required": [
              "key"
            ]
          }
        }
      },
      "required": [
        "contents",
        "surfaceId"
      ]
    },
    "deleteSurface": {
      "type": "object",
      "description": "Signals the client to delete the surface identified by 'surfaceId'.",
      "properties": {
        "surfaceId": {
          "type": "string",
          "description": "The unique identifier for the UI surface to be deleted."
        }
      },
      "required": [
        "surfaceId"
      ]
    }
  }
}
